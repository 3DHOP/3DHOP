<!DOCTYPE>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta content="charset=UTF-8"/>
<title>3DHOP - 3D Heritage Online Presenter</title>
<!--STYLESHEET-->
<link type="text/css" rel="stylesheet" href="stylesheet/3dhop.css"/>  
<!--SPIDERGL-->
<script type="text/javascript" src="js/spidergl.js"></script>
<!--JQUERY-->
<script type="text/javascript" src="js/jquery.js"></script>
<!--PRESENTER-->
<script type="text/javascript" src="js/presenter.js"></script>
<!--3D MODELS LOADING AND RENDERING-->
<script type="text/javascript" src="js/nexus.js"></script>
<script type="text/javascript" src="js/ply.js"></script>
<!--TRACKBALLS-->
<script type="text/javascript" src="js/trackball_sphere.js"></script>
<script type="text/javascript" src="js/trackball_turntable.js"></script>
<script type="text/javascript" src="js/trackball_turntable_pan.js"></script>
<script type="text/javascript" src="js/trackball_pantilt.js"></script>
<!--UTILITY-->
<script type="text/javascript" src="js/init.js"></script>
</head>
<body>
<div id="3dhop" class="tdhop" onmousedown="if (event.preventDefault) event.preventDefault()"><div id="tdhlg"></div>
 <div id="toolbar">
  <img id="home"     title="Home"                  src="skins/dark/home.png"   /><br/>
  <img id="zoomin"   title="Zoom In"               src="skins/dark/zoomin.png" /><br/>
  <img id="zoomout"  title="Zoom Out"              src="skins/dark/zoomout.png"/><br/>
  <img id="light_on" title="Disable Light Control" src="skins/dark/light_on.png" style="position:absolute; visibility:hidden;"/>
  <img id="light"    title="Enable Light Control"  src="skins/dark/light.png"/><br/>
  <img id="full_on"  title="Exit Full Screen"      src="skins/dark/full_on.png" style="position:absolute; visibility:hidden;"/>
  <img id="full"     title="Full Screen"           src="skins/dark/full.png"   />
 </div>
 <canvas id="draw-canvas" style="background-image: url(skins/backgrounds/light.jpg)"/>
</div>
</body>

<script type="text/javascript">
var presenter = null;

function setup3dhop() { 
	presenter = new Presenter("draw-canvas");

	presenter.setScene({
		meshes: {
			"NXS_PC"   : { url: "models/multires/pc.nxs" },
			"NXS_MESH" : { url: "models/multires/mesh_vc.nxs" },
			"NXS_TEXT" : { url: "models/multires/mesh_tex.nxs" },
			"PLY_PC"   : { url: "models/singleres/pc.ply" },
			"PLY_MESH" : { url: "models/singleres/mesh_vc.ply" },
			"PLY_TEXT" : { url: "models/singleres/mesh_tex.ply" },
		},
		modelInstances : {
			"Model1" : { 
				mesh : "NXS_PC",
				transform : { 
					translation : [0.0, 20.0, 0.0],
					rotation : [0.0, 0.0, 0.0], 
					scale : [1.0, 1.0, 1.0]
				}
			},
			"Model2" : { 
				mesh : "NXS_MESH",
				transform : { 
					translation : [50.0, 13.0, 0.0],
					rotation : [0.0, 0.0, 0.0], 
					scale : [0.25, 0.25, 0.25]
				}
			},
			"Model3" : { 
				mesh : "NXS_TEXT",
				transform : { matrix: SglMat4.mul(SglMat4.rotationAngleAxis(sglDegToRad(-30.0), [1.0, 0.0, 0.0]), SglMat4.mul(SglMat4.translation([-60.0, 15.0, 200.0]), SglMat4.scaling([0.25, 0.25, 0.25]))) }
//				transform : { 
//					translation : [-60.0, 15.0, 200.0],
//					rotation : [0.0, 0.0, 0.0], 
//					scale : [0.25, 0.25, 0.25]
//				}
			},
			"Model4" : { 
				mesh : "PLY_PC",
				transform : { 
					translation : [0.0, -20.0, 0.0],
					rotation : [0.0, 0.0, 0.0], 
					scale : [1.0, 1.0, 1.0]
				}
			},
			"Model5" : { 
				mesh : "PLY_MESH",
				transform : { 
					translation : [50.0, -27.0, 0.0],
					rotation : [0.0, 0.0, 0.0], 
					scale : [0.25, 0.25, 0.25]
				}
			},
			"Model6" : { 
				mesh : "PLY_TEXT",
				transform : { matrix: SglMat4.mul(SglMat4.rotationAngleAxis(sglDegToRad(-30.0), [1.0, 0.0, 0.0]), SglMat4.mul(SglMat4.translation([-60.0, -20.0, 175.0]), SglMat4.scaling([0.25, 0.25, 0.25]))) }
//				transform : { 
//					translation : [-60.0, -20.0, 175.0],
//					rotation : [0.0, 0.0, 0.0], 
//					scale : [0.25, 0.25, 0.25]
//				}
			} 
		},
		trackball: {
			type: TurntablePanTrackball,
			trackOptions: {
				startPhi      : 0.0,
				startTheta    : 0.0,
				startDistance : 1.0,
				startPanX     : 0.0,
				startPanY     : 0.0,
				startPanZ     : 0.0,
				minMaxPhi     : [-85.0, 95.0],
				minMaxTheta   : [-90.0, 90.0],
				minMaxDist    : [0.6, 2.0],
				minMaxPanX    : [-0.0, 0.0],
				minMaxPanY    : [-0.0, 0.0],
				minMaxPanZ    : [-0.0, 0.0],
			}
		},
		space : {
			centerMode    : "scene",
			radiusMode    : "scene",
			cameraType    : "ortho",
			cameraNearFar : [0.01, 10.0]
		}
	});
}

function actionsToolbar(action) {
	if(action=='home') presenter.resetTrackball(); 
	else if(action=='zoomin') presenter.zoomIn();
	else if(action=='zoomout') presenter.zoomOut(); 
	else if(action=='light' || action=='light_on') { presenter.enableLightTrackball(!presenter.isLightTrackballEnabled()); lightSwitch(); } 
	else if(action=='full'  || action=='full_on') fullscreenSwitch(); 
}

$(document).ready(function(){
	init3dhop();

	setup3dhop();
});
</script>
</html>
